### 프로세스와 스레드

- 프로세스
  
  - 컴퓨터에서 실행되고 있는 프로그램
  
  - 작업과 거의 같은 의미
    
    - 작업 (task)
      
      - CPU 스케줄링의 대상

- 스레드
  
  - 프로세스 내 작업의 흐름

### 공유 자원과 임계 영역

- 공유 자원 (shared resource)
  
  - 시스템 안에서 각 프로세스, 스레드가 함께 접근할 수 있는 모니터, 프린터, 메모리, 파일, 데이터 등의 자원이나 변수 등
  
  - 경쟁 상태 (race condition)
    
    - 공유 자원을 두 개 이상의 프로세스가 동시에 읽거나 쓰는 상황
    
    - 프로세스가 동시에 접근을 시도하여 타이밍이나 순서 등이 꼬여 결과값이 영향을 줄 수 있음

- 임계 영역 (critical section)
  
  - 공유 자원에 접근할 때 순서 등의 이유로 결과가 달라지는 영역
  
  - 해결 방법
    
    - 아래의 세 방법 모두 상호 배제, 한정 대기, 융통성의 조건을 만족함
      
      - 상호 배제
        
        - 한 프로세스가 임계 영역에 들어갔을 때 다른 프로세스는 들어갈 수 없음
      
      - 한정 대기
        
        - 특정 프로세스가 영원히 임계 영역에 들어가지 못하면 안 됨
      
      - 융통성
        
        - 한 프로세스가 다른 프로세스의 일을 방해해서는 안 됨
    
    - 뮤텍스 (mutex)
      
      - 공유 자원을 사용하기 전에 설정하고 사용한 후에 해제하는 잠금
      
      - 잠금이 설정되면 다른 스레드는 잠긴 코드 영역에 접근할 수 없음
      
      - 하나의 상태 (잠금 또는 잠금 해제)만을 가짐
    
    - 세마포어 (semaphore)
      
      - 일반화된 뮤텍스
      
      - 간단한 정수 값과 두 함수 (wait 및 signal)로 공유 자원에 대한 접근 처리
        
        - wait()
          
          - P 함수라고도 함
          
          - 자신의 차례가 올 때까지 기다리는 함수
        
        - signal()
          
          - V 함수라고도 함
          
          - 다음 프로세스로 순서를 넘겨주는 함수
      
      - 프로세스가 공유 자원에 접근하면 wait() 작업을 수행
      
      - 공유 자원을 해제하면 signal() 작업을 수행
      
      - 조건 변수가 없으며 프로세스가 세마포어 값을 수정할 때 다른 프로세스는 동시에 세마포어 값을 수정할 수 없음
      
      - 종류
        
        - 바이너리 세마포어
          
          - 0과 1의 두 가지 값만 가질 수 있는 세마포어
          
          - 뮤텍스와의 비교
            
            - 구현의 측면에서는 유사하여 뮤텍스가 바이너리 세마포어라고 할 수 있음
            
            - 차이점
              
              - 뮤텍스
                
                - 리소스에 대한 접근을 동기화하는 데 사용되는 `잠금` 메커니즘
              
              - 세마포어
                
                - 신호를 기반으로 상호 배제가 일어나는 `신호` 메커니즘
        
        - 카운팅 세마포어
          
          - 여러 개의 값을 가질 수 있는 세마포어
          
          - 여러 자원에 대한 접근을 제어하는데 사용
    
    - 모니터
      
      - 둘 이상의 스레드나 프로세스가 공유 자원에 안전하게 접근할 수 있도록 공유 자원을 숨기고 해당 접근에 대해 `인터페이스만 제공`
      
      - 세마포어보다 구현하기 쉬움
        
        - 차이점
          
          - 세마포어
            
            - 상호 배제를 명시적으로 구현해야 함
          
          - 모니터
            
            - 상호 배제가 자동