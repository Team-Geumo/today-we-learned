### 스레싱 (thrashing)

- 메모리에 너무 많은 프로세스가 동시에 올라가게 되면 스와핑이 많이 일어나 발생
  
  - 컴퓨터의 성능 저하를 초래

- 메모리의 페이지 폴트율이 높은 것을 의미
  
  - 페이지 폴트율이 높으면 CPU 이용률이 낮아지고 CPU 이용률이 낮아지면 가용성을 더 높이기 위해 더 많은 프로세스를 메모리에 올리게 됨

- 해결 방법
  
  - 메모리 늘리기
  
  - HDD를 사용하는 경우 HDD를 SDD로 바꾸기
  
  - 작업  세트 (working set)
    
    - 프로세스의  과거 사용 이력인 지역성 (locality)를 통해 결정된 페이지 집합을 만들어서 미리 메모리에 로드하는 것
    
    - 미리 메모리에 로드하면 탐색에 드는 비용을 줄일 수 있고 스와핑도 줄일 수 있음
  
  - PFF (Page Fault Frequency)
    
    - 페이지 폴트 빈도를 조절하는 방법
    
    - 상한선과 하한선을 만드는 방법
      
      - 상한선에 도달하면 페이지를 늘리고 하한선에 도달하면 페이지를 줄임

### 메모리 할당

- 연속 할당
  
  - 메모리에 연속적으로 공간을 할당하는 것
  
  - 고정 분할 방식 (fixed partition allocation)
    
    - 메모리를 미리 나누어 관리
    
    - 융통성이 없음
    
    - 내부 단편화 발생
  
  - 가변 분할 방식 (variable partition allocation)
    
    - 매 시점 프로그램의 크기에 맞게 동적으로 메모리를 나누어 사용
    
    - 내부 단편화는 발생하지 않고 외부 단편화는 발생할 수 있음
      
      - 내부 단편화 (internal fragmentation)
        
        - 메모리를 나눈 크기보다 프로그램이 작아서 들어가지 못하는 공간이 많이 발생하는 현상
      
      - 외부 단편화 (external fragmentation)
        
        - 메모리를 나눈 크기보다 프로그램이 커서 들어가지 못하는 공간이 많이 발생하는 현상
    
    - 종류
      
      - 최초적합 (first fit)
        
        - 위쪽이나 아래쪽부터 시작해서 홀을 찾으면 바로 할당
        
        - 홀
          
          - 할당할 수 있는 비어있는 메모리 공간
      
      - 최적적합 (best fit)
        
        - 프로세스의 크기 이상인 공간 중 가장 작은 홀부터 할당
      
      - 최악적합 (worst fit)
        
        - 프로세스의 크기와 가장 많이 차이가 나는 홀에 할당

- 불연속 할당
  
  - 현대 운영체제가 사용하는 방법
  
  - 페이징 (paging)
    
    - 동일한 크기의 페이지 단위로 나누어 메모리의 서로 다른 위치에 프로세스 할당
    
    - 홀의 크기가 균일하지 않은 문제가 없어지지만 주소 변환이 복잡해짐
  
  - 세그멘테이션 (segmentation)
    
    - 페이지 단위가 아니라 의미 단위로 나누는 방식
    
    - 프로세스는 코드, 데이터, 스택, 힙 등으로 이루어지는데 이들을 기반으로 나눌 수도 있고 함수 단위로 나눌 수도 있음
    
    - 공유와 보안 측면에서 좋으며 홀 크기가 균일하지 않은 문제 발생
  
  - 페이지드 세그멘테이션 (paged segmentation)
    
    - 공유나 보안을 의미 단위의 세그먼트로 나누고 물리적 메모리는 페이지로 나누는 것