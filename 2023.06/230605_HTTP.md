### HTTP

- 애플리케이션 계층으로 웹 서비스 통신에 사용

#### HTTP/1.0

- 하나의 연결 당 하나의 요청 처리
  
  - RTT가 증가함
    
    - 서버로부터 파일을 가져올 때마다 TCP의 3-way handshake를 계속해서 열어야 하기 때문
    
    - 서버에 부담이 많이 가고 사용자 응답 시간이 길어짐
    
    - RTT
      
      - 패킷이 목적지에 도달하고 나서 다시 출발지로 돌아오기까지 걸리는 시간
      
      - 패킷 왕복 시간
  
  - RTT 증가를 해결하기 위한 방법
    
    - 이미지 스플리팅
      
      - 많은 이미지가 합쳐 있는 하나의 이미지를 다운로드 받고 이를 기반으로 background-image의 position을 이용하여 이미지를 표기하는 방법
        
        ```css
        li>a {
            background-image: url("backgroung.png");
            display: inline-block;
            repeat: no-repeat;
        }
        
        li:nth-child(1)>a {
            background-position: 2px -8px;
        }
        
        li:nth-child(2)>a {
            background-position: -29px -8px;
        }
        ```
    
    - 코드 압축
      
      - 코드를 압축해서 개행 문자, 빈칸을 없애서 코드의 크기를 최소화하는 방법
    
    - 이미지 Base64 인코딩
      
      - 이미지 파일을 64진법으로 이루어진 문자열로 인코딩하는 방법
        
        - 인코딩
          
          - 정보의 형태나 형식을 표준화, 보안, 처리 속도 향상, 저장 공간 절약 등을 위해 다르 형태나 형식으로 변환하는 처리 방식
      
      - 장점
        
        - 서버와의 연결을 열고 이미지에 대해 서버에 HTTP 요청을 할 필요가 없음
      
      - 단점
        
        - Base64 문자열로 변환할 경우 37% 정도 크기가 더 커짐

#### HTTP/1.1

- HTTP/1.0에서 발전

- 매번 TCP 연결을 하는 것이 아니라 한 번 TCP를 초기화 한 이후에 `keep-alive`라는 옵션으로 여러 개의 파일을 송수신할 수 있게 됨
  
  - 한 번 TCP 3-way handshake가 발생하면 그 다음부터는 발생하지 않음
  
  - 단점
    
    - 문서 안에 포함된 다수의 리소스를 처리하려면 요청할 리소스 개수에 비례해서 대기 시간이 걸림
  
  - 특징
    
    - HOL Blocking
      
      - Head Of Line Blocking
      
      - 네트워크에서 같은 큐에 있는 패킷이 그 첫번째 패킷에 의해 지연될 때 발생하는 성능 저하 현상
    
    - 무거운 헤더
      
      - 헤더에 쿠키와 같은 많은 메타데이터가 압축되지 않은 상태로 들어있어 무거움

#### HTTP/2

- HTTP/1과 HTTP/1.1보다 지연시간을 줄이고 응답시간을 더 빠르게 할 수 있으며 멀티플렉싱, 헤더 압축, 서버 푸시, 요청의 우선순위 처리를 지원하는 프로토콜
  
  - 멀티플렉싱
    
    - 여러 개의 스트림을 사용하여 송수신
    
    - 특정 스트림의 패킷이 손실되었다고 하더라도 해당 스트림에만 영향을 미침
      
      - 스트림
        
        - 시간이 지남에 따라 사용할 수 있게 되는 일련의 데이터 요소를 가리키는 데이터 흐름
    
    - 단일 연결을 사용하여 병렬로 요청을 받고 응답을 줄 수 있음
      
      - HOL Blocking 해결 가능
  
  - 헤더 압축
    
    - 헤더 압축을 통해 무거운 헤더 문제 해결
      
      - 허프만 코딩 압출 알고리즘을 사용하는 HPACK 압축 형식
        
        - 허프만 코딩
          
          - 문자열을 문자 단위로 쪼개 빈도수를 세어 빈도가 높은 정보는 적은 비트 수를 사용하여 표현하고 빈도가 낮은 정보는 비트 수를 많이 사용하여 표현하여 전체 데이터의 표현에 필요한 비트양을 줄이는 원리
  
  - 서버 푸시
    
    - 클라이언트 요청 없이 서버가 바로 리소스를 푸시할 수 있음
    
    - html을 읽으면서 그 안에 들어있던 css 파일을 서버에서 푸시하여 클라이언트에 먼저 줄 수 있음
