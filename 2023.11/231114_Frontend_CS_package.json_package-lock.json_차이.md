## package.json과 package-lock.json의 차이

<aside>
✅ `package.json`은 배포한 모듈의 정보를 담고자 만들어진 파일로서 **패키지 버전을 범위로 명시**합니다. 패키지 버전의 차이로 인해 발생하는 문제를 해결하기 위해 `package-lock.json`에는 **정확한 버전이 명시**되어 있습니다.

</aside>

## 1. package.json

- 배포한 모듈의 정보를 담고자 만들어진 파일
- 기본적으로 CommonJS의 명세를 따르고 있음
- 직접 작성 혹은 `npm init` 명령어를 통해 자동 생성 가능
- `scripts`, `dependencies`, `devDependencies` 등의 필드가 존재
- `dependencies`, `devDependencies` 에 **패키지 버전은 범위로 명시되어 있음**

### `scripts`

- `npm run` 명령어로 실행하는 스크립트를 정의

### `dependencies`

- 해당 프로젝트가 **실행**되기 위해서 반드시 필요한 패키지를 명시
- `npm install` 사용 시 자동으로 반영

### `devDependencies`

- 개발 의존성, 즉 테스트 작성/실행이나 프로젝트 빌드 시에만 필요한 패키지를 명시
- `npm install`에 `--save-dev` 또는 `-D` 옵션을 사용하면 개발 의존성으로 패키지가 설치됨

```json
{
  "name": "choinoff",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "lint": "eslint src --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview"
  },
  "dependencies": {
    "@emotion/react": "^11.11.0",
    "@types/react-router-dom": "^5.3.3",
    "eslint-plugin-simple-import-sort": "^10.0.0",
    "eslint-plugin-unused-imports": "^2.0.0",
    "facepaint": "^1.2.1",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.11.2",
    "recoil": "^0.7.7"
  },
  "devDependencies": {
    "@types/facepaint": "^1.2.2",
    "@types/react": "^18.0.28",
    "@types/react-dom": "^18.0.11",
    "@typescript-eslint/eslint-plugin": "^5.59.7",
    "@typescript-eslint/parser": "^5.57.1",
    "@vitejs/plugin-react": "^4.0.0",
    "eslint": "^8.38.0",
    "eslint-plugin-prettier": "^4.2.1",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-react-refresh": "^0.3.4",
    "prettier": "^2.8.8",
    "typescript": "^5.0.2",
    "vite": "^4.3.8"
  }
}
```

## 2. package-lock.json

- **파일이 생성되는 시점의 의존성 트리에 대한 정확한 정보를 가지고 있음**
- `npm install`을 사용해서 `node_modules` 트리나 `package.json` 파일을 수정하면 자동으로 생성됨

```json
{
  "name": "choinoff",
  "version": "0.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    ...
    "node_modules/@ampproject/remapping": {
      **"version": "2.2.1",**
      "resolved": "https://registry.npmjs.org/@ampproject/remapping/-/remapping-2.2.1.tgz",
      "integrity": "sha512-lFMjJTrFL3j7L9yBxwYfCq2k6qqwHyzuUl/XBnif78PWTJYyL/dfowQHWE3sp6U6ZzqWiiIZnpTMO96zhkjwtg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.0",
        "@jridgewell/trace-mapping": "^0.3.9"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/code-frame": {
      **"version": "7.21.4",**
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.21.4.tgz",
      "integrity": "sha512-LYvhNKfwWSPpocw8GI7gpK2nq3HSDuEPC/uSYaALSJu9xjsalaaYFOq0Pwt5KmVqwEbZlDu81aLXwBOmD/Fv9g==",
      "license": "MIT",
      "dependencies": {
        "@babel/highlight": "^7.18.6"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
		...
	},
}
```

## 3. package-lock.json이 필요한 이유

- `package.json`은 패키지 버전이 범위로 정의되어 있기 때문에 package.json 파일만 사용할 경우 작업자 간의 버전 차이가 발생할 수 있음
- 이때, `package-lock.json`은 패키지 버전이 정확하게 명시되어 있기 때문에 **버전 차이로 인한 오류를 방지할 수 있음**
