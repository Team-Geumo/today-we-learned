# 즉시 실행 함수란?

```
즉시 실행 함수는 함수를 정의하는 즉시 호출되는 패턴으로, 주로 익명 함수로 사용되지만 기명 함수로도 정의 가능합니다.
이 패턴은 함수가 한 번만 호출되며, 주로 전역 변수 충돌을 방지하고 묘듈화된 코드 블록을 생성하는 데 활용됩니다.
함수 정의 시에는 그룹 연산자 ( )로 감싸야 합니다.
이를 통해 함수가 함수 표현식으로 평가되어 함수 객체가 되며, 외부 스코프와의 변수 충돌을 최소화할 수 있습니다.
```

<br><br>

## 1. 즉시 실행 함수란?

- Immediately Invoked Function Expression(IIFE)
- **함수 정의와 동시에 즉시 호출되는 함수**
- 단 한 번만 호출되며 다시 호출할 수 없음

  ```jsx
  // 익명 즉시 실행 함수
  (function () {
    var a = 3;
    var b = 5;
    return a * b;
  })();
  ```

<br>

- 함수 이름이 없는 **익명 함수**를 사용하는 것이 일반적

  - 함수 이름이 있는 기명 즉시 실행 함수도 사용 가능
  - 하지만 그룹 연산자 ( … ) 내의 기명 함수는 함수 선언문이 아니라 함수 리터럴로 평가되며 함수 이름은 함수 몸체에서만 참조할 수 있는 식별자이므로 즉시 실행 함수를 다시 호출할 수 없음

    ```jsx
    // 기명 즉시 실행 함수
    (function foo() {
      var a = 3;
      var b = 5;
      return a * b;
    })();

    foo(); // ReferenceError: foo is not defined
    ```

<br>

- **반드시 그룹 연산자 ( … )로 감싸야 함**

  ```jsx
  function () { // SyntaxError: Function statements require a function name
    // ...
  }();
  ```

  - 함수 정의가 함수 선언문의 형식에 맞지 않기 때문에 에러 발생
  - 함수 선언문은 함수 이름을 생략할 수 없음

  ```jsx
  function foo() {
    // ...
  }(); // SyntaxError: Unexpected token ')'
  ```

  - 자바스크립트 엔진이 암묵적으로 수행하는 세미콜론 자동 삽입 기능에 의해 함수 선언문이 끝나는 위치, 즉 함수 코드 블록의 닫는 중괄호 뒤에 “;”이 암묵적으로 추가되기 때문
    ```jsx
    function foo() {}(); // => function foo() {};();
    ```

<br>

- 함수 선언문 뒤의 ( … )는 함수 호출 연산자가 아니라 그룹 연산자로 해석되고, 그룹 연산자에 피연산자가 없기 때문에 에러 발생
  ```jsx
  (); // SyntaxError: Unexpected token ')'
  ```
  - 그룹 연산자의 피연산자는 **값**으로 평가되므로 기명 또는 무명 함수를 그룹 연산자로 감싸면 **함수 리터럴로 평가**되어 **함수 객체**가 됨
    ```jsx
    console.log(typeof function f() {}); // function
    console.log(typeof function () {}); // function
    ```

<br>

- 그룹 연산자로 함수를 묶는 이유는 **함수 리터럴을 평가해서 함수 객체를 생성**하기 위함

  - 함수 리터럴을 평가해서 함수 객체를 생성할 수 있다면 그룹 연산자 이외의 연산자를 사용해도 좋음

    ```jsx
    // 가장 일반적인 방식
    (function () {
      // ...
    })();

    (function () {
      // ...
    })();

    !(function () {
      // ...
    })();

    +(function () {
      // ...
    })();
    ```

<br>

- 즉시 실행 함수도 일반 함수처럼 값을 반환할 수 있고 인수를 전달할 수 있음

  ```jsx
  // 즉시 실행 함수도 일반 함수처럼 값 반환 가능
  var res = (function () {
    var a = 3;
    var b = 5;
    return a * b;
  })();

  console.log(res); // 15

  // 즉시 실행 함수에도 일반 함수처럼 인수 전달 가능
  res = (function (a, b) {
    return a * b;
  })(3, 5);

  console.log(res); // 15
  ```

  - 즉시 실행 함수 내에 코드를 모아 두면 혹시 있을 수도 있는 변수나 함수 이름의 충돌 방지 가능
