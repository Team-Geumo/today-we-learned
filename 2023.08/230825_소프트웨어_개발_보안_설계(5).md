### SW 공격기법 (4)

- 네트워크 공격
  
  - 공격기법
    
    - 스니핑 (Sniffing)
      
      - 공격대상에게 직접 공격을 하지 않고 데이터만 몰래 들여다보는 수동적 공격 기법
    
    - 네트워크 스캐너 (Scanner), 스니퍼 (Sniffer)
      
      - 네트워크 하드웨어 및 소프트웨어 구성의 취약점 파악을 위해 공격자가 취약점을 탐색하는 공격 도구
    
    - 패스워드 크래킹 (Password Cracking)
      
      - 사전 (Dictionary) 크래킹
        
        - 시스템 또는 서비스의 아이디와 패스워드를 크랙하기 위해 아이디와 패스워드가 될 가능성이 있는 단어를 파일로 만들어 놓고 이 파일의 단어를 대입하여 크랙하는 공격기법
      
      - 무차별 (Brute Force) 크래킹
        
        - 패스워드로 사용될 수 있는 영문자 (대소문자), 숫자, 특수문자 등을 무작위로 패스워드 자리에 대입하여 패스워드를 알아내는 공격기법
      
      - 패스워드 하이브리드 공격 (Password Hybrid Attack)
        
        - 사전 공격과 무차별 대입공격을 결합하여 공격하는 기법
      
      - 레인보우 테이블 공격 (Rainbow Table Attack)
        
        - 패스워드 별로 해시 값이 미리 생성해서 테이블에 모아놓고, 크래킹하고자 하는 해시 값을 테이블에서 검색해서 역으로 패스워드를 찾는 공격기법
    
    - IP 스푸핑 (IP Spoofing)
      
      - 침입자가 인증된 컴퓨팅 시스템인 것처럼 속여서 타깃 시스템의 정보를 빼내기 위해서 본인의 패킷 헤더를 인증된 호스트의 IP 어드레스로 위조하여 타깃에 전송하는 공격기법
      
      - 스푸핑 (Spoofing)
        
        - 공격자가 네트워크, 웹 사이트 등의 데이터 위변조를 통해 정상 시스템인 것처럼 위장하여 일반 사용자를 속이는 해킹 기법
    
    - ARP 스푸핑 (ARP Spoofing)
      
      - 공격자가 특정 호스트의 MAC 주소를 자신의 MAC 주소로 위조한 ARP Reply를 만들어 희생자에게 지속적으로 전송
      
      - 희생자의 ARP Cache Table에 특정 호스트의 MAC 정보를 공격자의 MAC 정보로 변경
      
      - 희생자로부터 특정 호스트로 나가는 패킷을 공격자가 `스니핑`하는 공격기법
    
    - ICMP Redirect 공격
      
      - 3계층에서 스니핑 시스템을 네트워크에 존재하는 또 다른 라우터라고 알림으로써 패킷의 흐름을 바꾸는 공격기법
      
      - ICMP Redirect 메시지를 공격자가 원하는 형태로 만들어 특정 목적지로 가는 패킷을 공격자가 스니핑하는 기법
    
    - 트로이 목마 (Trojan Horses)
      
      - 악성 루틴이 숨어 있는 프로그램으로 겉보기에는 정상적인 프로그램으로 보이지만 실행하면 악성 코드를 실행하는 프로그램
  
  - 대응 방안
    
    - 방화벽, 침입 차단 시스템 등 네트워크 보안 장비를 통한 방어
    
    - 네트워크 접속 차단 시스템을 통한 방어
    
    - 내부 호스트 및 시스템의 악성 코드 감염 방지를 위한 백신 설치 등을 통한 방어

- 시스템 보안 위협
  
  - 버퍼 오버플로우 (Buffer Overflow) 공격
    
    - 개념
      
      - 메모리에 할당된 버퍼 크기를 초과하는 양의 데이터를 입력하여 프로세스의  흐름을 변경시켜 악성 코드를 실행시키는 공격기법
    
    - 유형
      
      - 스택 버퍼 오버플로우 (Stack Buffer Overflow) 공격
        
        - 메모리 영역 중 Local Value나 함수의 Return Address가 저장되는 스택 영역에서 발생하는 오버플로우 공격
        
        - 스택 영역에 할당된 버퍼 크기를 초과하는 양의 데이터 (실행 가능 코드)를 입력하여 복귀 주소를 변경하고 공격자가 원하는 임의의 코드를 실행하는 공격 기법
      
      - 힙 버퍼 오버플로우 (Heap Buffer Overflow) 공격
        
        - 프로그램 실행 시 동적으로 할당되는 힙 영역에 할당된 버퍼 크기를 초과하는 데이터 (실행 가능 코드)를 입력하여 메모리의 데이터와 함수 주소 등을 변경, 공격자가 원하는 임의의 코드를 실행하는 공격기법
        
        - 인접한 메모리 (Linked-list)의 데이터가 삭제될 수 있으며, 해당 위치에 특정 함수에 대한 포인터 주소가 있으면 이를 악용하여 관리자 권한 파일에 접근하거나, 공격자의 특정 코드를 실행
    
    - 대응 방안
      
      - 스택가드 (Stack Guard) 활용
        
        - 카나리(canary)라고 불리는 무결성 체크용 값을 복귀 주소와 변수 사이에 삽입해두고, 버퍼 오버플로우 발생 시 카나리 값을 체크하여 값이 변한 경우 복귀 주소를 호출하지 않음
      
      - 스택쉴드 (Stack Shield) 활용
        
        - 함수 시작 시 복귀 주소를 Global RET라는 특수 스택에 저장해두고, 함수 종료 시 저장된 값과 스택의 RET 값을 비교하여 다른 경우 오버플로우로 생각하고 프로그램 실행을 중단
      
      - ASLR (Address Space Layout Randomization) 활용
        
        - 메모리 공격을 방어하기 위해 주소 공간 배치를 난수화하고, 실행 시마다 메모리 주소를 변경시켜 버퍼 오버플로우를 통한 특정 주소 호출 차단
        
        - 리눅스에서 설정 가능
      
      - 안전한 함수 활용
        
        | 취약한 함수                                                                                    | 안전한 함수                                                                      |
        | ----------------------------------------------------------------------------------------- | --------------------------------------------------------------------------- |
        | strcat(), strcpy(), gets(), scanf(), sscanf(), vscanf(), vsscanf(), sprintf(), vsprintf() | strncat(), strncpy(), fgets(), fscanf(), vfscanf(), snprintf(), vsnprintf() |
  
  - 백도어 (Backdoor)
    
    - 개념
      
      - 어떤 제품이나 컴퓨터 시스템, 암호 시스템 혹은 알고리즘에서 정상적인 인증 절차를 우회하는 기법
      
      - 어떤 고정된 형태가 있는 것은 아니라 프로그램 일부로 감춰져 있을 수도 있고, 독자적인 프로그램이나 하드웨어 모습을 갖기도 함
    
    - 탐지기법
      
      - 프로세스 및 열린 포트 확인
        
        - TCPView로 열린 포트를 확인하고 백도어 탐지
        
        - 리눅스에서는 `ps -ef` 명령어 (동작 중인 프로세스 확인), `netstat -an` (열린 포트 확인)을 통해 백도어 확인
      
      - Setuid 파일 검사
        
        - 새로 생성된 Setuid 파일이나 변경된 파일 확인을 통해 백도어 감지
      
      - 백신 및 백도어 탐지 툴 활용
        
        - 백신 프로그램 및 백도어 탐지 툴을 이용해서 의심 프로그램 및 백도어 유무 검출
      
      - 무결성 검사
        
        - 리눅스에서 Tripwire 툴을 이용한 무결성 검사 실시
        
        - **No such file or directory**라는 메시지가 출력되면 정상
      
      - 로그 분석
        
        - `wtmp, secure, lastlog, pacct, history, messages`를 사용하여 로그 분석 후 백도어 탐지
  
  - 주요 시스템 보안 공격기법
    
    - 포맷 스트링 공격 (Format String Attack)
      
      - 포맷 스트링을 인자로 하는 함수의 취약점을 이용한 공격으로 외부로부터 입력된 값을 검증하지 않고 입출력 함수의 포맷 스트링을 그대로 사용하는 경우 발생하는 취약점 공격기법
    
    - 레이스 컨디션 공격 (Race Condition Attack)
      
      - 레이스 컨디션
        
        - 둘 이상의 프로세스나 스레드가 공유자원을 동시에 접근할 때 접근 순서에 따라 비정상적인 결과가 발생하는 조건/상황
      
      - 레이스 컨디션 공격
        
        - 실행되는 프로세스가 임시파일을 만드는 경우 악의적인 프로그램을 통해 그 프로세스의 실행 중에 끼어들어 임시파일을 심볼릭 링크하여 악의적인 행위를 수행하게 하는 공격기법
    
    - 키로거 공격 (Key Logger Attack)
      
      - 컴퓨터 사용자의 키보드 움직임을 탐지해서 저장하고, ID나 패스워드, 계좌번호, 카드 번호 등과 같은 개인의 중요한 정보를 몰래 빼가는 해킹 공격
    
    - 루트킷 (Rootkit)
      
      - 시스템 침입 후 침입 사실을 숨긴 채 차후의 침입을 위한 백도어, 트로이 목마 설치, 원격 접근, 내부 사용 흔적 삭제, 관리자 권한 획득 등 주로 불법적인 해킹에 사용되는 기능을 제공하는 프로그램의 모음